# База данных псевдонимов игроков

## Описание

Этот файл содержит базу данных для сопоставления различных никнеймов одного и того же игрока. Игроки часто меняют свои никнеймы, и эта система позволяет объединять их статистику под одним каноническим именем.

## Структура данных

### `PLAYER_ALIASES`

Объект, где:

- **Ключ** - канонический (основной) никнейм игрока
- **Значение** - массив всех известных псевдонимов этого игрока (включая канонический)

```typescript
export const PLAYER_ALIASES: { [canonicalName: string]: string[] } = {
  "SN NINEimpulse": ["SN NINEimpulse", "SN BusDriver", "BusDriver"],
  // ...
};
```

## Как добавить нового игрока или псевдоним

### 1. Добавление нового игрока

Если игрок еще не добавлен в базу:

```typescript
'Основной ник игрока': [
    'Основной ник игрока',
    'Альтернативный ник 1',
    'Альтернативный ник 2',
],
```

**Важно:** Первый элемент массива должен совпадать с ключом (каноническим именем).

### 2. Добавление нового псевдонима существующему игроку

Найдите нужного игрока и добавьте новый псевдоним в массив:

```typescript
'SN NINEimpulse': [
    'SN NINEimpulse',
    'SN BusDriver',
    'BusDriver',
    'Новый ник', // Добавить сюда
],
```

## Функции для работы с псевдонимами

### `getCanonicalPlayerName(playerName: string): string`

Возвращает канонический (основной) никнейм игрока.

```typescript
getCanonicalPlayerName("BusDriver"); // вернет 'SN NINEimpulse'
getCanonicalPlayerName("SN NINEimpulse"); // вернет 'SN NINEimpulse'
getCanonicalPlayerName("Unknown Player"); // вернет 'Unknown Player'
```

### `isSamePlayer(name1: string, name2: string): boolean`

Проверяет, являются ли два никнейма одним и тем же игроком.

```typescript
isSamePlayer("BusDriver", "SN NINEimpulse"); // вернет true
isSamePlayer("SN Kazakh", "SN NINEimpulse"); // вернет false
```

### `getAllAliases(playerName: string): string[]`

Возвращает все известные псевдонимы игрока.

```typescript
getAllAliases("BusDriver"); // вернет ['SN NINEimpulse', 'SN BusDriver', 'BusDriver']
getAllAliases("Unknown Player"); // вернет ['Unknown Player']
```

## Как это работает в анализаторах

Все анализаторы (`teamAnalyzer`, `playerAnalyzer`, `matchAnalyzer`) автоматически используют канонические имена для объединения статистики:

1. При обработке данных каждый никнейм преобразуется в канонический через `getCanonicalPlayerName()`
2. Статистика собирается под каноническим именем
3. При выводе отображается канонический никнейм с информацией о встреченных псевдонимах

### Пример вывода

**В персональной статистике:**

```
--- SN NINEimpulse (также: SN NINEimpulse / BusDriver) ---
Игр сыграно: 30
Киллы: всего 26, в среднем 0.87, макс 6
...
```

**В рейтингах:**

```
SN NINEimpulse (SN NINEimpulse / BusDriver):
  Урон: 17464 (Топ-24 из 131)
  Киллы: 26 (Топ-23 из 131)
...
```

**В топах:**

```
3. SN NINEimpulse (SN NINEimpulse / BusDriver) (SUPERNOVA): 382 мин
```

## Примеры использования

### Команда SUPERNOVA

```typescript
'SN NINEimpulse': [
    'SN NINEimpulse',
    'SN BusDriver',
    'BusDriver',
],
'SN Kazakh': [
    'SN Kazakh',
],
'SN H': [
    'SN H',
],
```

### Другие команды

Добавляйте игроков других команд по мере необходимости в том же формате.

## Рекомендации

1. **Выбор канонического имени**: Используйте наиболее актуальный или официальный никнейм игрока
2. **Порядок псевдонимов**: Первым всегда должен быть канонический никнейм
3. **Полнота данных**: Добавляйте все известные варианты написания (с префиксами команд, без них и т.д.)
4. **Регулярное обновление**: Проверяйте и обновляйте базу при обнаружении новых никнеймов

## Автоматическое обновление

База данных обновляется вручную. При обнаружении нового никнейма в данных:

1. Откройте файл `libs/data/playerAliases.ts`
2. Найдите нужного игрока или создайте новую запись
3. Добавьте новый псевдоним в массив
4. Сохраните файл
5. Перезапустите анализ - статистика автоматически объединится
